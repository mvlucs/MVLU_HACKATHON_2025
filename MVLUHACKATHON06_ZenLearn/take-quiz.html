<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ZenLearn - Quiz (Standalone)</title>
  <style>
    :root{
      --bg:#f7fbfc; --card:#fff; --muted:#617087; --accent-1:#06b6d4; --accent-2:#3b82f6;
    }
    body{margin:0;font-family:Inter,Segoe UI,Roboto,sans-serif;background:var(--bg);color:#07203b}
    header{padding:12px 20px;display:flex;align-items:center;justify-content:space-between;background:#fff;border-bottom:1px solid #eee}
    .container{max-width:1000px;margin:34px auto;padding:0 20px}
    h1{font-size:2rem;margin:0 0 8px}
    p.muted{color:var(--muted);margin:6px 0 18px}
    .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 8px 30px rgba(13,42,70,0.06);margin-bottom:18px}
    label{font-weight:600;margin-right:6px}
    select{padding:8px 12px;border-radius:8px;border:1px solid #cbd5e1;background:#fbfeff}
    .btn-primary{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;padding:10px 18px;border-radius:10px;border:0;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(59,130,246,0.18)}
    .btn-primary[disabled]{opacity:.6;cursor:not-allowed;box-shadow:none}
    .btn-outline{background:#fff;border:1px solid #cbd5e1;padding:10px 16px;border-radius:10px;cursor:pointer;font-weight:600}
    .quiz-header{display:flex;justify-content:space-between;align-items:center}
    .timer{font-weight:800;color:var(--accent-2);font-size:20px}
    .question{margin-top:16px;padding-top:10px;border-top:1px solid #eef6fb}
    .option{display:block;margin:8px 0;padding:8px;border-radius:8px;background:#fbfeff;border:1px solid rgba(8,20,30,0.04)}
    .option:hover{background:linear-gradient(90deg, rgba(6,182,212,0.03), rgba(59,130,246,0.02))}
    .popup{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background:rgba(3,10,18,0.36)}
    .popup .popup-content{background:#fff;padding:20px;border-radius:12px;width:420px;box-shadow:0 14px 40px rgba(3,10,18,0.16)}
    @media (max-width:640px){.container{padding:0 12px} h1{font-size:1.6rem} .popup .popup-content{width:92%}}
  </style>
</head>
<body>

<header>
  <div style="font-weight:700;color:var(--accent-1)">üìñ ZenLearn</div>
  <nav style="display:flex;gap:18px;align-items:center">
    <a href="index.html">Home</a>
    <a href="take-quiz.html" style="font-weight:700;color:var(--accent-2)">Quiz</a>
    <a href="#">Daily Activity Tracker</a>
    <a href="#">Favorite Topics</a>
    <a href="#">Profile</a>
  </nav>
</header>

<main class="container">
  <h1>SSC Board Quiz</h1>
  <p class="muted">Select subject and set (10 questions each, 25 min). Focus, finish and give your feedback.</p>

  <!-- selector card -->
  <div class="card" style="display:flex;flex-wrap:wrap;gap:12px;align-items:center">
    <div style="display:flex;align-items:center;gap:8px">
      <label for="subject">Subject:</label>
      <select id="subject" aria-label="subject">
        <option value="math1">Mathematics 1</option>
        <option value="math2">Mathematics 2</option>
        <option value="english">English</option>
        <option value="geography">Geography</option>
      </select>
    </div>

    <div style="display:flex;align-items:center;gap:8px">
      <label for="setNum">Set:</label>
      <select id="setNum" aria-label="set">
        <option value="1">Set 1</option>
        <option value="2">Set 2</option>
        <option value="3">Set 3</option>
      </select>
    </div>

    <div id="attemptsInfo" style="margin-left:12px;color:#073247;font-weight:700">Attempts left: 3 / 3</div>

    <div style="margin-left:auto">
      <button class="btn-primary" id="startBtn">Start Quiz</button>
    </div>
  </div>

  <!-- quiz box -->
  <div id="quizBox" class="card" style="display:none">
    <div class="quiz-header" style="margin-bottom:10px">
      <div>
        <div id="quizTitle" style="font-weight:800;color:#07203b;font-size:18px">Quiz</div>
        <div style="color:var(--muted);font-weight:600" id="sessionLabel">10 questions ‚Ä¢ 25 minutes</div>
      </div>
      <div style="text-align:right;">
        <div style="font-size:12px;color:var(--muted)">Time left</div>
        <div id="timer" class="timer">25:00</div>
      </div>
    </div>

    <form id="quizForm" autocomplete="off"></form>

    <div style="display:flex;gap:12px;justify-content:flex-end;margin-top:16px">
      <button class="btn-outline" id="quitBtn">Quit</button>
      <button class="btn-primary" id="submitBtn">Submit Quiz</button>
    </div>

    <p class="muted" style="margin-top:12px">‚ö†Ô∏è If you try to close or reload the page during test you will be asked to confirm.</p>
  </div>
</main>

<!-- feedback modal -->
<div id="feedbackModal" class="popup" style="display:none">
  <div class="popup-content">
    <button onclick="closeFeedback()" style="position:absolute;right:12px;top:10px;border:none;background:transparent;font-size:20px;cursor:pointer">√ó</button>
    <h2>Feedback</h2>
    <p class="muted">How satisfied were you with this quiz? (1‚Äì100)</p>
    <input id="feedback" type="number" min="1" max="100" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6" />
    <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:12px">
      <button class="btn-outline" onclick="closeFeedback()">Cancel</button>
      <button class="btn-primary" onclick="saveFeedback()">Submit</button>
    </div>
  </div>
</div>

<script>
/* --------- INLINE quizData (4 subjects √ó 3 sets √ó 10 questions) --------- */
const quizData = {
  math1: {
    1: [
      { q: "2 + 3 = ?", options:["4","5","6","7"], ans:"5" },
      { q: "7 - 4 = ?", options:["1","2","3","4"], ans:"3" },
      { q: "5 √ó 2 = ?", options:["7","8","9","10"], ans:"10" },
      { q: "12 √∑ 4 = ?", options:["2","3","4","6"], ans:"3" },
      { q: "Square root of 36?", options:["5","6","7","8"], ans:"6" },
      { q: "10 + 15 = ?", options:["20","23","25","27"], ans:"25" },
      { q: "9 ‚àí 3 = ?", options:["6","5","4","7"], ans:"6" },
      { q: "3 √ó 3 = ?", options:["6","7","8","9"], ans:"9" },
      { q: "18 √∑ 3 = ?", options:["5","6","7","8"], ans:"6" },
      { q: "What is 0 + 5?", options:["0","3","4","5"], ans:"5" }
    ],
    2: [
      { q: "4 + 6 = ?", options:["8","9","10","11"], ans:"10" },
      { q: "8 ‚àí 5 = ?", options:["2","3","4","5"], ans:"3" },
      { q: "6 √ó 3 = ?", options:["16","18","20","22"], ans:"18" },
      { q: "14 √∑ 2 = ?", options:["6","7","8","9"], ans:"7" },
      { q: "Square root of 49?", options:["6","7","8","9"], ans:"7" },
      { q: "7 + 7 = ?", options:["13","14","15","16"], ans:"14" },
      { q: "15 ‚àí 5 = ?", options:["8","9","10","11"], ans:"10" },
      { q: "2 √ó 8 = ?", options:["14","15","16","17"], ans:"16" },
      { q: "20 √∑ 5 = ?", options:["2","3","4","5"], ans:"4" },
      { q: "1 + 9 = ?", options:["9","10","11","12"], ans:"10" }
    ],
    3: [
      { q: "3 + 4 = ?", options:["6","7","8","9"], ans:"7" },
      { q: "11 ‚àí 2 = ?", options:["8","9","10","11"], ans:"9" },
      { q: "4 √ó 4 = ?", options:["12","14","15","16"], ans:"16" },
      { q: "24 √∑ 6 = ?", options:["2","3","4","5"], ans:"4" },
      { q: "Square root of 25?", options:["4","5","6","7"], ans:"5" },
      { q: "9 + 6 = ?", options:["14","15","16","17"], ans:"15" },
      { q: "8 ‚àí 3 = ?", options:["4","5","6","7"], ans:"5" },
      { q: "5 √ó 5 = ?", options:["20","22","24","25"], ans:"25" },
      { q: "30 √∑ 6 = ?", options:["4","5","6","7"], ans:"5" },
      { q: "0 + 8 = ?", options:["6","7","8","9"], ans:"8" }
    ]
  },

  math2: {
    1: [
      { q:"Solve: 2x = 8. x = ?", options:["2","3","4","5"], ans:"4" },
      { q:"If x=3, then 3x+2 = ?", options:["8","9","10","11"], ans:"11" },
      { q:"HCF of 6 and 9?", options:["2","3","6","9"], ans:"3" },
      { q:"LCM of 4 and 6?", options:["8","10","12","14"], ans:"12" },
      { q:"5^2 = ?", options:["10","20","25","30"], ans:"25" },
      { q:"20% of 200 = ?", options:["20","30","40","50"], ans:"40" },
      { q:"Which is a prime? 9 or 11?", options:["9","10","11","12"], ans:"11" },
      { q:"Solve: x + 5 = 12 => x = ?", options:["6","7","8","9"], ans:"7" },
      { q:"If y=2, 2y+3 = ?", options:["6","7","8","9"], ans:"7" },
      { q:"10√ó(2+3) = ?", options:["20","40","50","60"], ans:"50" }
    ],
    2: [
      { q:"Simplify: 3(2+4) = ?", options:["12","14","16","18"], ans:"18" },
      { q:"Find x: 5x=25 => x=?", options:["4","5","6","7"], ans:"5" },
      { q:"What is 7√ó7?", options:["42","45","48","49"], ans:"49" },
      { q:"Percentage: 50% of 80 = ?", options:["30","40","50","60"], ans:"40" },
      { q:"Square root of 81?", options:["8","9","10","11"], ans:"9" },
      { q:"LCM of 3 and 5?", options:["8","10","12","15"], ans:"15" },
      { q:"2^3 = ?", options:["6","7","8","9"], ans:"8" },
      { q:"9+9+9 = ?", options:["18","27","36","45"], ans:"27" },
      { q:"15 √∑ 3 = ?", options:["3","4","5","6"], ans:"5" },
      { q:"If a=2, 2a+1=?", options:["4","5","6","7"], ans:"5" }
    ],
    3: [
      { q:"Solve: x-4=6 => x=?", options:["8","9","10","11"], ans:"10" },
      { q:"5+5√ó2 = ?", options:["15","20","25","30"], ans:"15" },
      { q:"HCF of 10 and 15?", options:["3","4","5","6"], ans:"5" },
      { q:"LCM of 2 and 7?", options:["7","14","21","28"], ans:"14" },
      { q:"10^2 = ?", options:["100","200","1000","10"], ans:"100" },
      { q:"20% of 50 = ?", options:["5","10","15","20"], ans:"10" },
      { q:"Prime between 10 and 20?", options:["12","13","14","15"], ans:"13" },
      { q:"Solve: 3x=12 => x=?", options:["3","4","5","6"], ans:"4" },
      { q:"8√ó4 = ?", options:["24","28","32","36"], ans:"32" },
      { q:"6+7 = ?", options:["11","12","13","14"], ans:"13" }
    ]
  },

  english: {
    1: [
      { q:"Synonym of 'Happy'?", options:["Sad","Angry","Joyful","Tired"], ans:"Joyful" },
      { q:"Antonym of 'Big'?", options:["Large","Huge","Small","Tall"], ans:"Small" },
      { q:"Fill: She ___ reading.", options:["is","are","am","be"], ans:"is" },
      { q:"Choose: 'Their' vs 'There' -> '___ house is big.'", options:["Their","There","They're","The"], ans:"Their" },
      { q:"Plural of 'Child'?", options:["Childs","Children","Childes","Child"], ans:"Children" },
      { q:"Past tense of 'Go'?", options:["Goed","Went","Go","Gone"], ans:"Went" },
      { q:"Pronoun for 'Sangeeta' is?", options:["He","She","They","It"], ans:"She" },
      { q:"Pick adjective: 'A ___ day'", options:["sun","sunny","sunned","sunning"], ans:"sunny" },
      { q:"Fill: He ___ a book yesterday.", options:["reads","read","will read","reading"], ans:"read" },
      { q:"Opposite of 'Fast'?", options:["Quick","Rapid","Slow","Swift"], ans:"Slow" }
    ],
    2: [
      { q:"Synonym of 'Small'?", options:["Tiny","Huge","Large","Big"], ans:"Tiny" },
      { q:"Antonym of 'Happy'?", options:["Sad","Glad","Joyful","Merry"], ans:"Sad" },
      { q:"Fill: They ___ playing.", options:["is","are","am","be"], ans:"are" },
      { q:"Choose: 'It's' vs 'Its' -> '___ raining.'", options:["Its","It's","Itts","It is"], ans:"It's" },
      { q:"Plural of 'Box'?", options:["Boxs","Boxes","Boxen","Boxes"], ans:"Boxes" },
      { q:"Past of 'Take'?", options:["Took","Taken","Take","Takes"], ans:"Took" },
      { q:"Pronoun for group is?", options:["He","She","They","It"], ans:"They" },
      { q:"Adjective: 'a ___ girl'", options:["beauty","beautiful","beautified","beautifies"], ans:"beautiful" },
      { q:"Fill: I ___ seen him.", options:["have","has","had","having"], ans:"have" },
      { q:"Opposite of 'Cold'?", options:["Hot","Cool","Warm","Freezing"], ans:"Hot" }
    ],
    3: [
      { q:"Synonym of 'Begin'?", options:["Start","Stop","End","Finish"], ans:"Start" },
      { q:"Antonym of 'Cheap'?", options:["Affordable","Expensive","Low","Bargain"], ans:"Expensive" },
      { q:"Fill: She ___ to school every day.", options:["go","goes","going","went"], ans:"goes" },
      { q:"Correct spelling: 'Receive' or 'Recieve'?", options:["Receive","Recieve","Recive","Receeve"], ans:"Receive" },
      { q:"Plural of 'Mouse'?", options:["Mouses","Mice","Mouse","Mices"], ans:"Mice" },
      { q:"Past of 'Sing'?", options:["Sang","Singed","Sung","Sings"], ans:"Sang" },
      { q:"Pronoun for 'the teacher'?", options:["He","She","They","It"], ans:"She" },
      { q:"Pick adverb: 'She runs ___'", options:["Quick","Quickly","Quicker","Quickest"], ans:"Quickly" },
      { q:"Fill: They ___ dinner now.", options:["eat","eating","are eating","eats"], ans:"are eating" },
      { q:"Opposite of 'Light'?", options:["Heavy","Bright","Soft","Dim"], ans:"Heavy" }
    ]
  },

  geography: {
    1: [
      { q:"Capital of India?", options:["Mumbai","New Delhi","Kolkata","Chennai"], ans:"New Delhi" },
      { q:"Largest continent?", options:["Asia","Africa","Europe","Antarctica"], ans:"Asia" },
      { q:"River Ganga originates from?", options:["Gangotri","Yamunotri","Haridwar","Rishikesh"], ans:"Gangotri" },
      { q:"Highest mountain in world?", options:["K2","Everest","Kangchenjunga","Lhotse"], ans:"Everest" },
      { q:"Largest ocean?", options:["Indian","Atlantic","Pacific","Arctic"], ans:"Pacific" },
      { q:"Which country is a peninsula?", options:["India","Saudi Arabia","Japan","Canada"], ans:"Japan" },
      { q:"Capital of Maharashtra?", options:["Pune","Mumbai","Nagpur","Nashik"], ans:"Mumbai" },
      { q:"Which is a desert?", options:["Sahara","Amazon","Ganges","Nile"], ans:"Sahara" },
      { q:"Which is an island nation?", options:["Nepal","Sri Lanka","Bhutan","Bangladesh"], ans:"Sri Lanka" },
      { q:"Longest river in India?", options:["Godavari","Ganga","Narmada","Brahmaputra"], ans:"Ganga" }
    ],
    2: [
      { q:"Which ocean lies to the west of India?", options:["Pacific","Atlantic","Indian","Arctic"], ans:"Indian" },
      { q:"Capital of Australia?", options:["Sydney","Melbourne","Canberra","Perth"], ans:"Canberra" },
      { q:"Which country is largest by area?", options:["Russia","China","USA","India"], ans:"Russia" },
      { q:"Equator passes through which continent?", options:["Asia","Africa","Europe","Australia"], ans:"Africa" },
      { q:"Which sea is east of India?", options:["Arabian Sea","Bay of Bengal","Red Sea","Mediterranean"], ans:"Bay of Bengal" },
      { q:"Capital of UK?", options:["London","Manchester","Birmingham","Edinburgh"], ans:"London" },
      { q:"Which is the smallest continent?", options:["Australia","Europe","Antarctica","South America"], ans:"Australia" },
      { q:"Name of ring of volcanoes region?", options:["Ring of Fire","Ring of Earth","Volcano Belt","Fire Circle"], ans:"Ring of Fire" },
      { q:"Which country has largest population?", options:["India","China","USA","Indonesia"], ans:"China" },
      { q:"Which river flows through Cairo?", options:["Nile","Amazon","Ganga","Yangtze"], ans:"Nile" }
    ],
    3: [
      { q:"Which mountain range is in India?", options:["Himalaya","Andes","Alps","Rockies"], ans:"Himalaya" },
      { q:"Which desert is in India?", options:["Thar","Sahara","Gobi","Kalahari"], ans:"Thar" },
      { q:"Capital of Japan?", options:["Tokyo","Kyoto","Osaka","Nagoya"], ans:"Tokyo" },
      { q:"Largest state in India by area?", options:["Maharashtra","Rajasthan","UP","Madhya Pradesh"], ans:"Rajasthan" },
      { q:"Which is a tropical rainforest?", options:["Amazon","Sahara","Gobi","Kalahari"], ans:"Amazon" },
      { q:"Which gulf is near Mumbai?", options:["Gulf of Kutch","Gulf of Khambhat","Gulf of Mannar","Gulf of Aden"], ans:"Gulf of Khambhat" },
      { q:"Which of these is an archipelago?", options:["Japan","India","China","Nepal"], ans:"Japan" },
      { q:"Which river forms the Grand Canyon?", options:["Colorado","Mississippi","Amazon","Ganges"], ans:"Colorado" },
      { q:"Which is nearest to North Pole?", options:["Arctic Ocean","Indian Ocean","Atlantic Ocean","Pacific Ocean"], ans:"Arctic Ocean" },
      { q:"Which continent has most countries?", options:["Africa","Asia","Europe","South America"], ans:"Africa" }
    ]
  }
};

/* --------- Quiz logic (attempts, timer, start, submit, quit, feedback) --------- */
let timer = null;
let timeLeft = 25 * 60;
let currentQuestions = [];
let currentSubject = null;
let currentSet = null;
const MAX_ATTEMPTS = 3;

function keyFor(subject, set){ return `attempts_${subject}_${set}`; }
function getAttemptsUsed(subject,set){ const v=localStorage.getItem(keyFor(subject,set)); return v?parseInt(v,10):0; }
function setAttemptsUsed(subject,set,n){ localStorage.setItem(keyFor(subject,set),String(n)); }

function updateAttemptsInfoUI(){
  const subject=document.getElementById('subject').value;
  const set=document.getElementById('setNum').value;
  const info=document.getElementById('attemptsInfo');
  const startBtn=document.getElementById('startBtn');
  const used=getAttemptsUsed(subject,set); const left=Math.max(0,MAX_ATTEMPTS-used);
  info.textContent=`Attempts left: ${left} / ${MAX_ATTEMPTS}`;
  if(left<=0){ startBtn.disabled=true; startBtn.title='No attempts left for this set.'; }
  else{ startBtn.disabled=false; startBtn.title=''; }
}

document.addEventListener('DOMContentLoaded', ()=>{
  document.getElementById('subject').addEventListener('change', updateAttemptsInfoUI);
  document.getElementById('setNum').addEventListener('change', updateAttemptsInfoUI);
  document.getElementById('startBtn').addEventListener('click', (e)=>{ e.preventDefault(); startQuiz(); });
  document.getElementById('submitBtn').addEventListener('click', (e)=>{ e.preventDefault(); submitQuiz(); });
  document.getElementById('quitBtn').addEventListener('click', (e)=>{ e.preventDefault(); quitQuiz(); });
  updateAttemptsInfoUI();
});

function startQuiz(){
  currentSubject=document.getElementById('subject').value;
  currentSet=document.getElementById('setNum').value;
  if(!quizData[currentSubject] || !quizData[currentSubject][currentSet]){ alert('Selected set not available. Contact admin or try another set.'); return; }
  const used=getAttemptsUsed(currentSubject,currentSet);
  if(used>=MAX_ATTEMPTS){ alert(`You have used all ${MAX_ATTEMPTS} attempts for this set.`); updateAttemptsInfoUI(); return; }
  setAttemptsUsed(currentSubject,currentSet,used+1);
  updateAttemptsInfoUI();

  currentQuestions = quizData[currentSubject][currentSet];
  const form=document.getElementById('quizForm'); form.innerHTML='';
  currentQuestions.forEach((q,i)=>{
    const wrap=document.createElement('div'); wrap.className='question';
    const qHtml=`<h4>${i+1}. ${q.q}</h4>`;
    const optsHtml=q.options.map(o=>`<label class="option"><input type="radio" name="q${i}" value="${o}"> ${o}</label>`).join('');
    wrap.innerHTML=qHtml+optsHtml; form.appendChild(wrap);
  });

  document.getElementById('quizBox').style.display='block';
  timeLeft=25*60; updateTimerDisplay(); clearInterval(timer);
  timer=setInterval(()=>{ timeLeft--; updateTimerDisplay(); if(timeLeft<=0){ clearInterval(timer); window.onbeforeunload=null; alert('Time is up ‚Äî your answers will be submitted automatically.'); finalizeSubmit(); } },1000);
  window.onbeforeunload = ()=> 'You have an ongoing quiz. Leaving will forfeit the attempt.';
}

function updateTimerDisplay(){ const el=document.getElementById('timer'); const m=Math.floor(Math.max(0,timeLeft)/60).toString().padStart(2,'0'); const s=(timeLeft%60).toString().padStart(2,'0'); if(el) el.textContent=`${m}:${s}`; }

function submitQuiz(){
  if(!currentQuestions || currentQuestions.length===0){ alert('No quiz running.'); return; }
  finalizeSubmit();
}

function finalizeSubmit(){
  clearInterval(timer); window.onbeforeunload=null;
  let score=0;
  currentQuestions.forEach((q,i)=>{ const sel=document.querySelector(`input[name="q${i}"]:checked`); if(sel && sel.value===q.ans) score++; });
  localStorage.setItem('lastScore',String(score));
  localStorage.setItem('lastSubject',currentSubject);
  localStorage.setItem('lastSet',currentSet);
  localStorage.setItem('lastTimeTaken',String(25*60 - timeLeft));
  alert(`‚úÖ Your Score: ${score} / ${currentQuestions.length}`);
  document.getElementById('feedbackModal').style.display='flex';
  currentQuestions=[];
}

function quitQuiz(){
  if(!currentQuestions || currentQuestions.length===0){ window.location.href='index.html'; return; }
  if(confirm('Do you really want to quit? Your current attempt will be lost.')){ clearInterval(timer); window.onbeforeunload=null; window.location.href='index.html'; }
}

function saveFeedback(){
  const fb=document.getElementById('feedback').value||'';
  const key=`feedback_${currentSubject}_${currentSet}_${Date.now()}`;
  if(fb) localStorage.setItem(key,String(fb));
  alert('Thanks for your feedback!');
  document.getElementById('feedbackModal').style.display='none';
  updateAttemptsInfoUI();
  window.location.href='index.html';
}

function closeFeedback(){ document.getElementById('feedbackModal').style.display='none'; updateAttemptsInfoUI(); }
</script>

</body>
</html>
